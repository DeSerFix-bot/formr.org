{
    "name": "Simple_Social_Network",
    "units": [
        {
            "type": "Survey",
            "description": "how many friends do you have",
            "position": 10,
            "special": "",
            "survey_data": {
                "name": "friend_list",
                "items": [
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "intro",
                        "label": "Hi there, Pokémaster!",
                        "label_parsed": "Hi there, Pokémaster!",
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 1
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": "0,any,1",
                        "name": "nr_friends",
                        "label": "How many Pokémon are you currently training?",
                        "label_parsed": "How many Pokémon are you currently training?",
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 2
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "fav_poke",
                        "label": "Start with your most favourite Pokémon!",
                        "label_parsed": "Start with your most favourite Pokémon!",
                        "optional": 0,
                        "class": null,
                        "showif": "\/\/js_only\nnr_friends >= 1",
                        "value": "",
                        "block_order": null,
                        "item_order": 3
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend1",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 1",
                        "value": "",
                        "block_order": null,
                        "item_order": 5
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend1",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 1",
                        "value": "",
                        "block_order": null,
                        "item_order": 6
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend1",
                        "type_options": "",
                        "name": "type_friend1",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 1",
                        "value": "",
                        "block_order": null,
                        "item_order": 7,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend1",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 1",
                        "value": "",
                        "block_order": null,
                        "item_order": 8
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend2",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 2",
                        "value": "",
                        "block_order": null,
                        "item_order": 10
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend2",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 2",
                        "value": "",
                        "block_order": null,
                        "item_order": 11
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend2",
                        "type_options": "",
                        "name": "type_friend2",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 2",
                        "value": "",
                        "block_order": null,
                        "item_order": 12,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend2",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 2",
                        "value": "",
                        "block_order": null,
                        "item_order": 13
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend3",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 3",
                        "value": "",
                        "block_order": null,
                        "item_order": 15
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend3",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 3",
                        "value": "",
                        "block_order": null,
                        "item_order": 16
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend3",
                        "type_options": "",
                        "name": "type_friend3",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 3",
                        "value": "",
                        "block_order": null,
                        "item_order": 17,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend3",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 3",
                        "value": "",
                        "block_order": null,
                        "item_order": 18
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend4",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 4",
                        "value": "",
                        "block_order": null,
                        "item_order": 20
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend4",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 4",
                        "value": "",
                        "block_order": null,
                        "item_order": 21
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend4",
                        "type_options": "",
                        "name": "type_friend4",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 4",
                        "value": "",
                        "block_order": null,
                        "item_order": 22,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend4",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 4",
                        "value": "",
                        "block_order": null,
                        "item_order": 23
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend5",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 5",
                        "value": "",
                        "block_order": null,
                        "item_order": 25
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend5",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 5",
                        "value": "",
                        "block_order": null,
                        "item_order": 26
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend5",
                        "type_options": "",
                        "name": "type_friend5",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 5",
                        "value": "",
                        "block_order": null,
                        "item_order": 27,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend5",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 5",
                        "value": "",
                        "block_order": null,
                        "item_order": 28
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend6",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 6",
                        "value": "",
                        "block_order": null,
                        "item_order": 30
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend6",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 6",
                        "value": "",
                        "block_order": null,
                        "item_order": 31
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend6",
                        "type_options": "",
                        "name": "type_friend6",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 6",
                        "value": "",
                        "block_order": null,
                        "item_order": 32,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend6",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 6",
                        "value": "",
                        "block_order": null,
                        "item_order": 33
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend7",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 7",
                        "value": "",
                        "block_order": null,
                        "item_order": 35
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend7",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 7",
                        "value": "",
                        "block_order": null,
                        "item_order": 36
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend7",
                        "type_options": "",
                        "name": "type_friend7",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 7",
                        "value": "",
                        "block_order": null,
                        "item_order": 37,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend7",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 7",
                        "value": "",
                        "block_order": null,
                        "item_order": 38
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 50,
                        "name": "name_friend8",
                        "label": "Name",
                        "label_parsed": "Name",
                        "optional": 0,
                        "class": "clear right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 8",
                        "value": "",
                        "block_order": null,
                        "item_order": 40
                    },
                    {
                        "type": "sex",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex_friend8",
                        "label": "Sex",
                        "label_parsed": "Sex",
                        "optional": 0,
                        "class": "right150 align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 8",
                        "value": "",
                        "block_order": null,
                        "item_order": 41
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "type_friend8",
                        "type_options": "",
                        "name": "type_friend8",
                        "label": "Type",
                        "label_parsed": "Type",
                        "optional": 0,
                        "class": "align_horizontally",
                        "showif": "\/\/js_only\nnr_friends >= 8",
                        "value": "",
                        "block_order": null,
                        "item_order": 42,
                        "choices": {
                            "Pikachu": "Pikachu",
                            "Squirtle": "Squirtle",
                            "Metapod": "Metapod",
                            "Rattata": "Rattata"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": null,
                        "name": "size_friend8",
                        "label": "Größe (cm)",
                        "label_parsed": "Größe (cm)",
                        "optional": 0,
                        "class": "align_horizontally label_as_placeholder",
                        "showif": "\/\/js_only\nnr_friends >= 8",
                        "value": "",
                        "block_order": null,
                        "item_order": 43
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "no_more",
                        "label": "You can only enter up to Pokémon because of Dunbar's number (Pokémon version).",
                        "label_parsed": "You can only enter up to Pokémon because of Dunbar's number (Pokémon version).",
                        "optional": 0,
                        "class": null,
                        "showif": "\/\/js_only\nnr_friends >= 8",
                        "value": "",
                        "block_order": null,
                        "item_order": 45
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "send_off",
                        "label": "Gotta rate them all",
                        "label_parsed": "Gotta rate them all",
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 46
                    }
                ],
                "settings": {
                    "maximum_number_displayed": 0,
                    "displayed_percentage_maximum": 100,
                    "add_percentage_points": 0,
                    "enable_instant_validation": 1,
                    "expire_after": 0,
                    "google_file_id": "1B3boUGSAMpnRamHLq66PQppvopWUkNVTUoCXYUqUisQ",
                    "unlinked": 1
                },
                "google_sheet": "https:\/\/docs.google.com\/spreadsheets\/d\/1B3boUGSAMpnRamHLq66PQppvopWUkNVTUoCXYUqUisQ\/edit"
            }
        },
        {
            "type": "Survey",
            "description": "rate each friend",
            "position": 20,
            "special": "",
            "survey_data": {
                "name": "friend_rate",
                "items": [
                    {
                        "type": "calculate",
                        "choice_list": null,
                        "type_options": null,
                        "name": "friend_nr",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "nrow(friend_rate)",
                        "block_order": null,
                        "item_order": 1
                    },
                    {
                        "type": "calculate",
                        "choice_list": null,
                        "type_options": null,
                        "name": "name",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "friend_list[, paste0(\"name_friend\", friend_nr)]",
                        "block_order": null,
                        "item_order": 2
                    },
                    {
                        "type": "calculate",
                        "choice_list": null,
                        "type_options": null,
                        "name": "sex",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "friend_list[, paste0(\"sex_friend\", friend_nr)]",
                        "block_order": null,
                        "item_order": 3
                    },
                    {
                        "type": "calculate",
                        "choice_list": null,
                        "type_options": null,
                        "name": "his",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "ifelse(sex, \"his\", \"her\")",
                        "block_order": null,
                        "item_order": 4
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "rate_intro",
                        "label": "In the following, please rate _`r name`_.",
                        "label_parsed": null,
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 6
                    },
                    {
                        "type": "mc",
                        "choice_list": "food",
                        "type_options": null,
                        "name": "food",
                        "label": "What's `r his` favourite food?",
                        "label_parsed": null,
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 7,
                        "choices": {
                            "1": "Candy",
                            "2": "Dust",
                            "3": "Cocaine"
                        }
                    },
                    {
                        "type": "rating_button",
                        "choice_list": "liking",
                        "type_options": null,
                        "name": "liking",
                        "label": "How much do you like _`r name`_?",
                        "label_parsed": null,
                        "optional": 0,
                        "class": null,
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 8,
                        "choices": {
                            "1": "like a Pidgey",
                            "2": "a lot"
                        }
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "next",
                        "label": "Rate next Pokémon",
                        "label_parsed": "Rate next Pokémon",
                        "optional": 0,
                        "class": null,
                        "showif": "nrow(friend_rate) < friend_list$nr_friends",
                        "value": "",
                        "block_order": null,
                        "item_order": 10
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "end",
                        "label": "End ratings",
                        "label_parsed": "End ratings",
                        "optional": 0,
                        "class": null,
                        "showif": "nrow(friend_rate) >= friend_list$nr_friends",
                        "value": "",
                        "block_order": null,
                        "item_order": 11
                    }
                ],
                "settings": {
                    "maximum_number_displayed": 0,
                    "displayed_percentage_maximum": 100,
                    "add_percentage_points": 0,
                    "enable_instant_validation": 1,
                    "expire_after": 0,
                    "google_file_id": "1vvejJ6_To0h_orLc9KUvvqZSuGMvMc29XHE8rSja0FQ",
                    "unlinked": 1
                },
                "google_sheet": "https:\/\/docs.google.com\/spreadsheets\/d\/1vvejJ6_To0h_orLc9KUvvqZSuGMvMc29XHE8rSja0FQ\/edit"
            }
        },
        {
            "type": "SkipBackward",
            "description": "loop the friend ratings until all were rated",
            "position": 30,
            "special": "",
            "condition": "min(8, friend_list$nr_friends) > nrow(friend_rate)",
            "if_true": 20
        },
        {
            "type": "Endpage",
            "description": "",
            "position": 40,
            "special": "",
            "body": "# Thank you\r\n\r\nFor rating all your friends.\r\n\r\n\r\n```{r message = F, warning = F}\r\nlibrary(DT)\r\nlibrary(ggplot2)\r\nlibrary(dplyr)\r\nlibrary(tidyr)\r\n```\r\n\r\n```{r}\r\nfriend_list = friend_list %>% gather(variable, value) %>%\r\nseparate(variable, c(\"variable\", \"friend\"), sep = \"_\") %>% \r\n    mutate(friend_nr = stringr::str_match(friend, \"\\\\d+\")[,1] %>% as.numeric()) %>%\r\n\t\tselect(-friend) %>%\r\n\t\tspread(variable, value)\r\n\r\nfriends = friend_list %>% left_join(friend_rate, by = \"friend_nr\")\r\n\r\n# name_friend, sex_friend, type_friend, size_friend, food, liking\r\n\r\ndatatable(friends, options = list(pageLength = 5))\r\n```\r\n\r\n```{r}\r\nqplot(size, liking, data = friends)\r\n```\r\n"
        }
    ]
}